<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculating Hours Fished â€¢ SRJPEdata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Calculating Hours Fished">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SRJPEdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/summary_of_data_for_modeling.html">Summary of Data for Modeling </a>
    </li>
    <li>
      <a href="../articles/lifestage_ruleset.html">Lifestage Rulesets</a>
    </li>
    <li>
      <a href="../articles/site_overview.html">Site Selection for Stock Recruit Modeling</a>
    </li>
    <li>
      <a href="../articles/trap_effort.html">Hours Fished Analysis</a>
    </li>
    <li>
      <a href="../articles/years_to_include_analysis.html">Monitoring Years to Include</a>
    </li>
    <li>
      <a href="../articles/prep_environmental_covariates.html">Passage to Spawner Model Covariate Prep</a>
    </li>
    <li>
      <a href="../articles/sr_covariates.html">Stock Recruit Model Covariate Prep</a>
    </li>
    <li>
      <a href="../articles/forecast_covariates.html">Forecast and Scenario Model Covariate Prep</a>
    </li>
    <li>
      <a href="../articles/temp_regression.html">Filling Temperature Data Gaps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/SRJPE/SRJPEdata" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Calculating Hours Fished</h1>
            
      

      <div class="hidden name"><code>trap_effort.Rmd</code></div>

    </div>

    
    
<p>In order to estimate juvenile abundance (see the BTSPASX in the
SRJPEmodel package) from catch data collected at rotary screw traps we
need to know how efficient the traps are (what percent of the population
is captured in the traps?) and the amount of time the trap is sampling.
Hours fished is a calculated field. The goal of this document is to
calculate hours fished by date, stream and site.</p>
<p>Data were checked and cleaned in scripts available <a href="https://github.com/FlowWest/JPE-datasets/tree/main/scripts/rst" class="external-link">here</a>.
Cleaned data were saved on the JPE cloud database and pulled using the
<code>pull_tables_from_database.R</code> script.</p>
<div class="section level3">
<h3 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a>
</h3>
<p>We explored three primary methods to calculate hours fished. Methods
were chosen based on data collected at the RST site. When no times, trap
revolutions, or trap revolutions per minute (RPMs) were collected, we
assume 24 hours for each day that trap is fishing. The trap revolution
method is commonly used by RST programs but we were not able to get
reasonable results for most programs we tried it on so we ended up
relying on trap times instead of revolutions. This may be due to
different methods for determining cone rotation rate. For instance,
Battle measures the average time per rotation whereas Feather River and
Knights Landing measure the revolutions per minute. Using total
revolutions and the cone rotation rate to calculate sampling period may
be useful in the future when methods are more similar.</p>
<ol style="list-style-type: decimal">
<li>Use start and stop time</li>
<li>Use RPMs start, RPMs end, and total revolutions (Method 2 was used
as a comparison method but was ultimately not picked as the final
method)</li>
<li>Use start time only</li>
</ol>
<p>Over time locations have required different methods based on what
information is available. For example, historically it was more common
that a location might only have one date. However, currently all
locations collect both a start and stop datetime. We have therefore
adapted method 1 to use in all cases noting that historically when a
start or stop date is missing we would apply method 3 and use the last
stop time for a missing start date or the next start time for a missing
stop date.</p>
<p>Below is the code for each of the methods described above:</p>
<ol style="list-style-type: decimal">
<li>If the start and stop date/time of the sampling period are
available, simply subtract the difference in time. There are some cases
where start or stop might be missing. In those cases, we use the last
stop time for a missing start date or the next start time for a missing
stop date.</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculating hours fished when have start and stop datetime</span></span>
<span><span class="va">hours_fished</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>trap_start_time <span class="op">=</span> <span class="fu">as_hms</span><span class="op">(</span><span class="va">trap_start_date</span><span class="op">)</span>, <span class="co"># pull out hms from date</span></span>
<span>           trap_stop_time <span class="op">=</span> <span class="fu">as_hms</span><span class="op">(</span><span class="va">trap_stop_date</span><span class="op">)</span>, <span class="co"># pull out hms from date</span></span>
<span>           start_datetime <span class="op">=</span> <span class="fu">ymd_hms</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu">as_date</span><span class="op">(</span><span class="va">trap_start_date</span><span class="op">)</span>, <span class="va">trap_start_time</span><span class="op">)</span><span class="op">)</span>, <span class="co"># fills in 00:00:00 for those without time originally</span></span>
<span>           stop_datetime <span class="op">=</span> <span class="fu">ymd_hms</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu">as_date</span><span class="op">(</span><span class="va">trap_stop_date</span><span class="op">)</span>, <span class="va">trap_stop_time</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># fills in 00:00:00 for those without time originally</span></span>
<span>           start_datetime <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">start_datetime</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">stop_datetime</span><span class="op">)</span>, </span>
<span>                                      <span class="cn">T</span> <span class="op">~</span> <span class="va">start_datetime</span><span class="op">)</span>, <span class="co"># assigns next stop for missing start</span></span>
<span>           stop_datetime <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">stop_datetime</span><span class="op">)</span> <span class="op">~</span> <span class="fu">lead</span><span class="op">(</span><span class="va">start_datetime</span><span class="op">)</span>, </span>
<span>                                     <span class="cn">T</span> <span class="op">~</span> <span class="va">stop_datetime</span><span class="op">)</span>, <span class="co"># assigns next start time for missing stop</span></span>
<span>           hours_fished <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">stop_datetime</span>, <span class="va">start_datetime</span>, units <span class="op">=</span> <span class="st">"hours"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>If the RPMs start, RPMs end, and total revolutions are available,
take the average cone RPMs and divide
<code>total_revolutions</code>/average RMP/60 to get total hours
fished.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculating hours fished when have start and stop datetime</span></span>
<span><span class="va">revolution_calculated_hours_fished</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_start</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_end</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">total_revolutions</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>prior_day_rpm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_end</span><span class="op">)</span>, <span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/stats/lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">rpm_end</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           sum_rpms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">prior_day_rpm</span><span class="op">)</span>, <span class="va">rpm_start</span>, <span class="va">rpm_start</span> <span class="op">+</span> <span class="va">prior_day_rpm</span><span class="op">)</span>, </span>
<span>           cone_rpms <span class="op">=</span> <span class="va">sum_rpms</span> <span class="op">/</span> <span class="fl">2</span>,</span>
<span>           hours_fished <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_start</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">total_revolutions</span><span class="op">/</span><span class="va">rpm_end</span><span class="op">/</span><span class="fl">60</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                                    <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_end</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">total_revolutions</span><span class="op">/</span><span class="va">rpm_start</span><span class="op">/</span><span class="fl">60</span>, <span class="fl">2</span><span class="op">)</span>, </span>
<span>                                    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">total_revolutions</span><span class="op">/</span><span class="va">cone_rpms</span><span class="op">/</span><span class="fl">60</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>If only one date is available, assume that the end date is the date
sampled on the following day.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculating hours fished when have only date and time</span></span>
<span><span class="va">hours_fished_one_date</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">site</span>, <span class="va">subsite</span>, <span class="va">start_datetime</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>end_datetime <span class="op">=</span> <span class="fu">lead</span><span class="op">(</span><span class="va">start_datetime</span><span class="op">)</span>,</span>
<span>         end_datetime <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">end_datetime</span>, <span class="va">start_datetime</span>, units <span class="op">=</span> <span class="st">"hours"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">120</span> <span class="op">~</span> <span class="va">start_datetime</span> <span class="op">+</span> <span class="fu">hours</span><span class="op">(</span><span class="fl">24</span><span class="op">)</span>, </span>
<span>                                  <span class="cn">T</span> <span class="op">~</span> <span class="va">end_datetime</span><span class="op">)</span>,</span>
<span>         hours_fished <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">end_datetime</span>, <span class="va">start_datetime</span>, units <span class="op">=</span> <span class="st">"hours"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="section level4">
<h4 id="other-assumptions">Other Assumptions<a class="anchor" aria-label="anchor" href="#other-assumptions"></a>
</h4>
<p>Based on protocols and information from monitoring programs, sampling
periods are typically 24 hours, unless flows are very high in which
traps are checked more frequently. Calculating hours fished based on
time and date provided in data provides more specificity, however, there
are typos and errors resulting in nonsensical hours fished. In these
cases, we assume 24 hour sampling periods.</p>
<ul>
<li>If only a date is available and no time, assume 24 hour sampling
periods for each date.</li>
<li>If information is missing or there are typos, assume 24 hour
sampling periods.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 class="tabset" id="hours-fished">Hours Fished<a class="anchor" aria-label="anchor" href="#hours-fished"></a>
</h3>
<p>We now process all locations together using a combination of method 1
and 3. All locations currently have both a start and stop date though
this was not the case historically. There are cases when start date or
stop date is NA. For these we fill in the start date assuming it is the
sample date of the previous record. When the stop date is missing we
assume it is the start date of the next record. Note that there are some
records with 0 hours. These occur because trap visit data was entered
when the trap was not in service and then a new trap visit entry was
recorded once the trap started working again. There are some erroneous
values. These will be addressed at the end of the script by setting
limits.</p>
<table class="table">
<colgroup>
<col width="17%">
<col width="17%">
<col width="8%">
<col width="8%">
<col width="10%">
<col width="26%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">start_datetime</th>
<th align="left">stop_datetime</th>
<th align="left">site</th>
<th align="left">subsite</th>
<th align="left">stream</th>
<th align="left">hours_fished_methodology</th>
<th align="left">hours_fished</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">NA</td>
<td align="left">1997-01-18 00:00:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using start time and stop time</td>
<td align="left">NA hours</td>
</tr>
<tr class="even">
<td align="left">1997-01-18 00:00:00</td>
<td align="left">1997-01-18 09:00:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using start time and stop time</td>
<td align="left">9 hours</td>
</tr>
<tr class="odd">
<td align="left">1997-01-18 09:00:00</td>
<td align="left">1997-03-05 00:00:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using start time and stop time</td>
<td align="left">1095 hours</td>
</tr>
<tr class="even">
<td align="left">1997-01-18 09:00:00</td>
<td align="left">1997-03-05 09:00:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using start time and stop time</td>
<td align="left">1104 hours</td>
</tr>
<tr class="odd">
<td align="left">1997-03-05 09:00:00</td>
<td align="left">1997-03-11 00:00:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using start time and stop time</td>
<td align="left">135 hours</td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="qc">QC<a class="anchor" aria-label="anchor" href="#qc"></a>
</h4>
<p>The dot plot below shows hours fished for each stream by date. Most
dots appear to be hovering around the 24 hour mark but a few are greater
than 1000 or less than -1000 and skew the plot.</p>
<p><img src="trap_effort_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>The histogram below shows data filtered to remove the outliers though
there are still some inconsistencies with hours fished below or equal to
0. As mentioned above there are reasons why hours fished may be 0.</p>
<p><img src="trap_effort_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<p>The dot plot below shows hours fished for each stream by date. Here
we see several distinct bands of dots in 24 hour increments, indicating
that the trap is most often checked every day but that there are some
instances where it is checked every other or every few days.</p>
<p><img src="trap_effort_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
</div>
</div>
<div class="section level2">
<h2 id="combine-data">Combine Data<a class="anchor" aria-label="anchor" href="#combine-data"></a>
</h2>
<p>We added rows with 0 effort for days that where there is no trapping
data and applied rulesets to ensure erroneous data are not included.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hours_fished_combined</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">stream</span> <span class="op">==</span> <span class="st">"butte creek"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">hours_fished</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">subsite</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span><span class="op">+</span> </span>
<span>  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="va">colors_full</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Week"</span>, y <span class="op">=</span> <span class="st">"Hours Fished"</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"Hours Fished All Methods"</span><span class="op">)</span></span></code></pre></div>
<p><img src="trap_effort_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
<div class="section level3">
<h3 id="summarized-by-week">Summarized by week<a class="anchor" aria-label="anchor" href="#summarized-by-week"></a>
</h3>
<p>We grouped hours fished data by site, subsite, week, and year and
summarized to come up with a weekly hours fished dataset. We capped
hours fished to 168 for each stream, assuming that a single trap could
not run for more hours than there are in a week. Before 2005 trap data
is not available for Knights Landing, we assume 168 hours when trap data
is missing.</p>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 26 Ã— 5</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Groups:   year, stream, site [17]</span></span></span>
<span><span class="co">##     year stream           site            subsite                n</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">2</span>002 sacramento river knights landing knights landing       14</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">2</span>003 sacramento river knights landing knights landing       44</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">2</span>004 sacramento river knights landing knights landing       36</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">2</span>005 sacramento river knights landing knights landing       39</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">2</span>006 sacramento river knights landing knights landing       26</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">2</span>015 butte creek      okie dam        okie dam 1            10</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">2</span>016 butte creek      okie dam        okie dam 1            24</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">2</span>017 butte creek      okie dam        okie dam 1             9</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">2</span>017 butte creek      okie dam        okie dam fyke trap     9</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>018 butte creek      okie dam        okie dam 1            24</span></span>
<span><span class="co">## <span style="color: #949494;"># â„¹ 16 more rows</span></span></span></code></pre>
<div class="section level4">
<h4 id="qc-1">QC<a class="anchor" aria-label="anchor" href="#qc-1"></a>
</h4>
<p>The following plots provide visuals to show weekly hours fished for a
few select stream and calendar year. Note that for the combined plots
this is for all years of data so there are multiple datapoints for a
given week due to multiple years being represented and multiple
subsites.</p>
<p><img src="trap_effort_files/figure-html/unnamed-chunk-9-1.png" width="768"><img src="trap_effort_files/figure-html/unnamed-chunk-9-2.png" width="768"><img src="trap_effort_files/figure-html/unnamed-chunk-9-3.png" width="768"><img src="trap_effort_files/figure-html/unnamed-chunk-9-4.png" width="768"><img src="trap_effort_files/figure-html/unnamed-chunk-9-5.png" width="768"><img src="trap_effort_files/figure-html/unnamed-chunk-9-6.png" width="768"></p>
<p>The following plot shows all years</p>
<p><img src="trap_effort_files/figure-html/unnamed-chunk-10-1.png" width="768"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ashley Vizek, Erin Cain, Liz Stebbins.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
