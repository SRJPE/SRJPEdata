<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lifestage Ruleset â€¢ SRJPEdata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Lifestage Ruleset">
<meta property="og:description" content="SRJPEdata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SRJPEdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/lifestage_ruleset.html">Lifestage Rulesets</a>
    </li>
    <li>
      <a href="../articles/trap_effort.html">Hours Fished Analysis</a>
    </li>
    <li>
      <a href="../articles/years_to_include_analysis.html">Monitoring Years to Include</a>
    </li>
    <li>
      <a href="../articles/prep_environmental_covariates.html">Passage to Spawner Model Covariate Prep</a>
    </li>
    <li>
      <a href="../articles/sr_covariates.html">Stock Recruit Model Covariate Prep</a>
    </li>
    <li>
      <a href="../articles/temp_regression.html">Filling Temperature Data Gaps</a>
    </li>
    <li>
      <a href="../articles/summary_of_data_for_modeling.html">Summary of Data for Modeling </a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/SRJPE/SRJPEdata" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Lifestage Ruleset</h1>
            
      
      
      <div class="hidden name"><code>lifestage_ruleset.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="generate-yearling-rulesets">Generate Yearling Rulesets<a class="anchor" aria-label="anchor" href="#generate-yearling-rulesets"></a>
</h2>
<p>Raw catch from the trap does not consistently differentiate between
yearling and young of year (YOY) Chinook. FlowWest presented a proposed
methodology at a life history diversity (LHD) ruleset workshop (see <a href="https://flowwest.shinyapps.io/lhd-workshop-shiny/" class="external-link">lhd shiny</a>
for workshop materials) and worked with watershed experts to define a
methodology to systematically determine life history for each tributary
(described below).</p>
<p><strong>Approach</strong></p>
<ol style="list-style-type: decimal">
<li>Set weekly cutoff values: Use visual determination on fork length
over time scatter plots to set weekly cutoff values of yearlings vs
YOY.</li>
<li>Generate daily cutoff values: Use linear interpolation to
extrapolate weekly cutoffs into daily values.</li>
<li>Review &amp; update: Share proposed cutoff values with watershed
experts to review. Update as needed.</li>
<li>Apply cutoff to catch data: Use daily cutoff values to generate a
yearling column in the catch data.</li>
</ol>
<div class="section level3">
<h3 id="set-weekly-cutoff-values-generate-daily-cutoff-values">Set Weekly Cutoff Values &amp; Generate daily cutoff values<a class="anchor" aria-label="anchor" href="#set-weekly-cutoff-values-generate-daily-cutoff-values"></a>
</h3>
<p>FlowWest proposed weekly cutoff values and used these weekly cutoff
values to generate daily values using a linear approximation function,
<code>approxfun</code>.</p>
<p><code>generate_cutoff &lt;- approxfun(date, fork_length_cutoff, rule = 2)</code></p>
<p>The plot below shows the updated cutoff values with linear
interpolation of weekly cutoffs for Deer Creek.</p>
<p><strong>Note: You can view all code used to generate plots and tables
in this markdown <a href="https://github.com/SRJPE/SRJPEdata/blob/main/vignettes/lifestage_ruleset.Rmd" class="external-link">here.</a></strong></p>
<p><img src="lifestage_ruleset_files/figure-html/unnamed-chunk-2-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="review-update">Review &amp; Update<a class="anchor" aria-label="anchor" href="#review-update"></a>
</h3>
<p>FlowWest shared above plot for each watershed and asked stream
experts to review. We incorporated feedback and modified rulesets to
better separate yearlings and YOY.</p>
</div>
<div class="section level3">
<h3 id="apply-cutoff-to-catch-data">Apply Cutoff to Catch Data<a class="anchor" aria-label="anchor" href="#apply-cutoff-to-catch-data"></a>
</h3>
<p>FlowWest took the daily cutoff line (shown in plot above) and used it
as a threshold to classify yearling vs YOY in historical catch data. We
added an <code>is_yearling</code> column to the catch data and set
<code>is_yearling = TRUE</code> for any fish with a fork length that
exceeded the yearling cutoff on a given date.</p>
<p>The following code is applied in the <code>weekly_data_summary</code>
script.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Note this is not the final dataset as lifestage is added below</span></span>
<span><span class="va">standard_catch_unmarked_w_yearling</span> <span class="op">&lt;-</span> <span class="va">rst_catch</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"chinook"</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># filter for only chinook</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>month <span class="op">=</span> <span class="fu">month</span><span class="op">(</span><span class="va">date</span><span class="op">)</span>, </span>
<span>         day <span class="op">=</span> <span class="fu">day</span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">daily_yearling_ruleset</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>is_yearling <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="op">(</span><span class="va">fork_length</span> <span class="op">&lt;=</span> <span class="va">cutoff</span> <span class="op">&amp;</span> <span class="op">!</span><span class="va">run</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fall"</span>,<span class="st">"late fall"</span>, <span class="st">"winter"</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="cn">F</span>,</span>
<span>                                 <span class="op">(</span><span class="va">fork_length</span> <span class="op">&gt;</span> <span class="va">cutoff</span> <span class="op">&amp;</span> <span class="op">!</span><span class="va">run</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fall"</span>,<span class="st">"late fall"</span>, <span class="st">"winter"</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="cn">T</span>,</span>
<span>                                 <span class="op">(</span><span class="va">run</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fall"</span>,<span class="st">"late fall"</span>, <span class="st">"winter"</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="cn">NA</span>,</span>
<span>                                 <span class="cn">T</span> <span class="op">~</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="fry-and-smolt-designations">Fry and Smolt Designations<a class="anchor" aria-label="anchor" href="#fry-and-smolt-designations"></a>
</h2>
<p>In addition to differentiating between yearling and YOY it is
important for the SR JPE to differentiate between fry and smolt as there
will likely be a separate SR JPE for each lifestage. Some monitoring
programs assign lifestage based on visual determination or fork length
though not all RST data included lifestage data. To ensure lifestage was
assigned consistently across streams and was complete, FlowWest
developed an approach for differentiating between fry and smolt.</p>
<p><strong>Approach</strong></p>
<ol style="list-style-type: decimal">
<li>Create <code>lifestage</code> based on forklength cutoff of 45mm
(&lt; 45 - fry, &gt; 45 - smolt)</li>
<li>Determine year specific proportions for fry, smolt, yearling for
each stream, site, week and year</li>
<li>Determine general week proportions for fry, smolt, yearling for each
stream, week</li>
<li>Apply proportions to data to fill in missing lifestage</li>
<li>Generate rows for when no fish of a particular lifestage are
caught</li>
</ol>
<div class="section level3">
<h3 id="create-lifestage-variable">Create lifestage variable<a class="anchor" aria-label="anchor" href="#create-lifestage-variable"></a>
</h3>
<p>The first step was to apply a lifestage cutoff to catch records that
had fork lengths recorded. These cutoffs are
<code>fork_length &lt; 45 = fry</code>,
<code>fork_length &gt; 45 = smolt</code>,
<code>fork_length &gt; yearling_cutoff = yearling</code>.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="10%">
<col width="10%">
<col width="4%">
<col width="7%">
<col width="10%">
<col width="5%">
<col width="4%">
<col width="10%">
<col width="14%">
<col width="4%">
<col width="10%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">date</th>
<th align="left">stream</th>
<th align="left">site</th>
<th align="left">subsite</th>
<th align="left">site_group</th>
<th align="right">count</th>
<th align="left">run</th>
<th align="left">life_stage</th>
<th align="left">adipose_clipped</th>
<th align="left">dead</th>
<th align="right">fork_length</th>
<th align="right">weight</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">36</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">37</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">37</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">37</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">37</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">34</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">33</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">39</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">38</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2010-01-16</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">fry</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">37</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="determine-year-specific-lifestage-proportions">Determine year specific lifestage proportions<a class="anchor" aria-label="anchor" href="#determine-year-specific-lifestage-proportions"></a>
</h3>
<p>There are 44880 entries with missing lifestage due to missing fork
length data.</p>
<table class="table">
<colgroup>
<col width="9%">
<col width="11%">
<col width="4%">
<col width="7%">
<col width="11%">
<col width="5%">
<col width="4%">
<col width="9%">
<col width="14%">
<col width="4%">
<col width="10%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">date</th>
<th align="left">stream</th>
<th align="left">site</th>
<th align="left">subsite</th>
<th align="left">site_group</th>
<th align="right">count</th>
<th align="left">run</th>
<th align="left">life_stage</th>
<th align="left">adipose_clipped</th>
<th align="left">dead</th>
<th align="right">fork_length</th>
<th align="right">weight</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2002-03-13</td>
<td align="left">clear creek</td>
<td align="left">lcc</td>
<td align="left">lcc</td>
<td align="left">clear creek</td>
<td align="right">1</td>
<td align="left">fall</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2002-01-01</td>
<td align="left">battle creek</td>
<td align="left">lbc</td>
<td align="left">lbc</td>
<td align="left">battle creek</td>
<td align="right">7</td>
<td align="left">fall</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2002-01-01</td>
<td align="left">battle creek</td>
<td align="left">lbc</td>
<td align="left">lbc</td>
<td align="left">battle creek</td>
<td align="right">3</td>
<td align="left">fall</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2002-01-01</td>
<td align="left">battle creek</td>
<td align="left">lbc</td>
<td align="left">lbc</td>
<td align="left">battle creek</td>
<td align="right">6</td>
<td align="left">fall</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">2002-01-06</td>
<td align="left">battle creek</td>
<td align="left">lbc</td>
<td align="left">lbc</td>
<td align="left">battle creek</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2002-01-06</td>
<td align="left">battle creek</td>
<td align="left">lbc</td>
<td align="left">lbc</td>
<td align="left">battle creek</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>The first step in filling in these missing lifestages was to find the
proportion for each lifestage category for a given stream, site, week,
and year. This information could then be used to fill in the lifestage
for missing rows within a week.</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="5%">
<col width="18%">
<col width="25%">
<col width="12%">
<col width="14%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="right">year</th>
<th align="right">week</th>
<th align="left">stream</th>
<th align="left">site</th>
<th align="right">percent_fry</th>
<th align="right">percent_smolt</th>
<th align="right">percent_yearling</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1992</td>
<td align="right">42</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">1992</td>
<td align="right">44</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">1992</td>
<td align="right">45</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">1992</td>
<td align="right">46</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">1992</td>
<td align="right">48</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">1992</td>
<td align="right">49</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">1994</td>
<td align="right">29</td>
<td align="left">sacramento river</td>
<td align="left">red bluff diversion dam</td>
<td align="right">0.0</td>
<td align="right">1.0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1994</td>
<td align="right">30</td>
<td align="left">sacramento river</td>
<td align="left">red bluff diversion dam</td>
<td align="right">0.0</td>
<td align="right">1.0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">1994</td>
<td align="right">31</td>
<td align="left">sacramento river</td>
<td align="left">red bluff diversion dam</td>
<td align="right">0.0</td>
<td align="right">1.0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1994</td>
<td align="right">32</td>
<td align="left">sacramento river</td>
<td align="left">red bluff diversion dam</td>
<td align="right">0.1</td>
<td align="right">0.9</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="determine-general-weekly-lifestage-proportions">Determine general weekly lifestage proportions<a class="anchor" aria-label="anchor" href="#determine-general-weekly-lifestage-proportions"></a>
</h3>
<p>For weeks that had no fork length data in a given week, we calculated
a general lifestage proportion across years. Calculating the proportion
for each lifestage category for a given stream, site, and week.</p>
</div>
<div class="section level3">
<h3 id="apply-proportions-to-fill-in-missing-values">Apply proportions to fill in missing values<a class="anchor" aria-label="anchor" href="#apply-proportions-to-fill-in-missing-values"></a>
</h3>
<p>We used these proportions to fill in missing lifestage values. See
the final lifestage designations below.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="8%">
<col width="10%">
<col width="3%">
<col width="7%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="15%">
<col width="6%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="left">date</th>
<th align="left">stream</th>
<th align="left">site</th>
<th align="left">subsite</th>
<th align="left">site_group</th>
<th align="left">run</th>
<th align="left">adipose_clipped</th>
<th align="left">dead</th>
<th align="right">fork_length</th>
<th align="right">weight</th>
<th align="right">week</th>
<th align="right">year</th>
<th align="left">model_lifestage_method</th>
<th align="left">life_stage</th>
<th align="right">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">79</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">fry</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">79</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">smolt</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">79</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">yearling</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">87</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">fry</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">87</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">smolt</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">87</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">yearling</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">93</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">fry</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">93</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">smolt</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">93</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">yearling</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">not recorded</td>
<td align="left">FALSE</td>
<td align="left">NA</td>
<td align="right">94</td>
<td align="right">NA</td>
<td align="right">42</td>
<td align="right">1992</td>
<td align="left">assigned from fl cutoffs</td>
<td align="left">fry</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="generate-rows-for-when-no-fish-of-a-lifestage-are-caught">Generate rows for when no fish of a lifestage are caught<a class="anchor" aria-label="anchor" href="#generate-rows-for-when-no-fish-of-a-lifestage-are-caught"></a>
</h3>
<p>In order to improve the usability of this dataset (particulary for
modeling) we decided to add rows for when a lifestage was not caught.
For instance, there may be only fry caught on a particular day and when
running the model for smolt that day would not show up in the
dataset.</p>
</div>
<div class="section level3">
<h3 id="review-lifestage">Review lifestage<a class="anchor" aria-label="anchor" href="#review-lifestage"></a>
</h3>
<p>The following plot shows the general patten in the lifestage field
where fry are caught earlier in the year and smolt are caught later in
the year.</p>
<p><strong>Battle Creek: 2011</strong></p>
<p><img src="lifestage_ruleset_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
</div>
</div>
<div class="section level2">
<h2 id="save-resulting-data-to-package">Save resulting data to package<a class="anchor" aria-label="anchor" href="#save-resulting-data-to-package"></a>
</h2>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ashley Vizek, Erin Cain, Liz Stebbins.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
