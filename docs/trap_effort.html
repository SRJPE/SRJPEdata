<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Combine Data • SRJPEdata</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet"><meta property="og:title" content="Combine Data"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">SRJPEdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="articles/lifestage_ruleset.html">Lifestage Rulesets</a>
    </li>
    <li>
      <a href="articles/site_overview.html">Site Selection for Stock Recruit Modeling</a>
    </li>
    <li>
      <a href="articles/trap_effort.html">Hours Fished Analysis</a>
    </li>
    <li>
      <a href="articles/years_to_include_analysis.html">Monitoring Years to Include</a>
    </li>
    <li>
      <a href="articles/prep_environmental_covariates.html">Passage to Spawner Model Covariate Prep</a>
    </li>
    <li>
      <a href="articles/sr_covariates.html">Stock Recruit Model Covariate Prep</a>
    </li>
    <li>
      <a href="articles/temp_regression.html">Filling Temperature Data Gaps</a>
    </li>
    <li>
      <a href="articles/summary_of_data_for_modeling.html">Summary of Data for Modeling </a>
    </li>
  </ul></li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/SRJPE/SRJPEdata" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Combine Data</h1>
    </div>


<p>In order to estimate juvenile abundance (see the BTSPASX in the SRJPEmodel package) from catch data collected at rotary screw traps we need to know how efficient the traps are (what percent of the population is captured in the traps?) and the amount of time the trap is sampling. Hours fished is a calculated field. The goal of this document is to calculate hours fished by date, stream and site.</p>
<p>Data were checked and cleaned in scripts available <a href="https://github.com/FlowWest/JPE-datasets/tree/main/scripts/rst" class="external-link">here</a>. Cleaned data were saved on the JPE cloud database and pulled using the <code>pull_tables_from_database.R</code> script.</p>
<div class="section level2">
<h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
<p>We explored three primary methods to calculate hours fished. Methods were chosen based on data collected at the RST site. When no times, trap revolutions, or trap revolutions per minute (RPMs) were collected, we assume 24 hours for each day that trap is fishing. The trap revolution method is commonly used by RST programs but we were not able to get reasonable results for most programs we tried it on so we ended up relying on trap times instead of revolutions. This may be due to different methods for determining cone rotation rate. For instance, Battle measures the average time per rotation whereas Feather River and Knights Landing measure the revolutions per minute. Using total revolutions and the cone rotation rate to calculate sampling period may be useful in the future when methods are more similar.</p>
<ol style="list-style-type: decimal"><li>Use start and stop time</li>
<li>Use RPMs start, RPMs end, and total revolutions (Method 2 was used as a comparison method but was ultimately not picked as the final method)</li>
<li>Use start time only</li>
</ol><p>Below is the code for each of the methods described above:</p>
<ol style="list-style-type: decimal"><li>If the start and stop date/time of the sampling period are available, simply subtract the difference in time.</li>
</ol><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculating hours fished when have start and stop datetime</span></span>
<span><span class="va">hours_fished</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">trap_stop_time</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">trap_start_time</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>start_datetime <span class="op">=</span> <span class="fu">ymd_hms</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">trap_start_date</span>, <span class="va">trap_start_time</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           stop_datetime <span class="op">=</span> <span class="fu">ymd_hms</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">trap_stop_date</span>, <span class="va">trap_stop_time</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           hours_fished <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">stop_datetime</span>, <span class="va">start_datetime</span>, units <span class="op">=</span> <span class="st">"hours"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal"><li>If the RPMs start, RPMs end, and total revolutions are available, take the average cone RPMs and divide <code>total_revolutions</code>/average RMP/60 to get total hours fished.</li>
</ol><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculating hours fished when have start and stop datetime</span></span>
<span><span class="va">revolution_calculated_hours_fished</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_start</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_end</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">total_revolutions</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>prior_day_rpm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_end</span><span class="op">)</span>, <span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/stats/lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">rpm_end</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           sum_rpms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">prior_day_rpm</span><span class="op">)</span>, <span class="va">rpm_start</span>, <span class="va">rpm_start</span> <span class="op">+</span> <span class="va">prior_day_rpm</span><span class="op">)</span>, </span>
<span>           cone_rpms <span class="op">=</span> <span class="va">sum_rpms</span> <span class="op">/</span> <span class="fl">2</span>,</span>
<span>           hours_fished <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_start</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">total_revolutions</span><span class="op">/</span><span class="va">rpm_end</span><span class="op">/</span><span class="fl">60</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                                    <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rpm_end</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">total_revolutions</span><span class="op">/</span><span class="va">rpm_start</span><span class="op">/</span><span class="fl">60</span>, <span class="fl">2</span><span class="op">)</span>, </span>
<span>                                    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">total_revolutions</span><span class="op">/</span><span class="va">cone_rpms</span><span class="op">/</span><span class="fl">60</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal"><li>If only one date is available, assume that the end date is the date sampled on the following day.</li>
</ol><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculating hours fished when have only date and time</span></span>
<span><span class="va">hours_fished_one_date</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">site</span>, <span class="va">subsite</span>, <span class="va">start_datetime</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>end_datetime <span class="op">=</span> <span class="fu">lead</span><span class="op">(</span><span class="va">start_datetime</span><span class="op">)</span>,</span>
<span>         end_datetime <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">end_datetime</span>, <span class="va">start_datetime</span>, units <span class="op">=</span> <span class="st">"hours"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">120</span> <span class="op">~</span> <span class="va">start_datetime</span> <span class="op">+</span> <span class="fu">hours</span><span class="op">(</span><span class="fl">24</span><span class="op">)</span>, </span>
<span>                                  <span class="cn">T</span> <span class="op">~</span> <span class="va">end_datetime</span><span class="op">)</span>,</span>
<span>         hours_fished <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">end_datetime</span>, <span class="va">start_datetime</span>, units <span class="op">=</span> <span class="st">"hours"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="section level3">
<h3 id="other-assumptions">Other Assumptions<a class="anchor" aria-label="anchor" href="#other-assumptions"></a></h3>
<p>Based on protocols and information from monitoring programs, sampling periods are typically 24 hours, unless flows are very high in which traps are checked more frequently. Calculating hours fished based on time and date provided in data provides more specificity, however, there are typos and errors resulting in nonsensical hours fished. In these cases, we assume 24 hour sampling periods.</p>
<ul><li>If only a date is available and no time, assume 24 hour sampling periods for each date.</li>
<li>If information is missing or there are typos, assume 24 hour sampling periods.</li>
</ul></div>
</div>
<div class="section level2 tabset">
<h2 class="tabset" id="hours-fished">Hours Fished<a class="anchor" aria-label="anchor" href="#hours-fished"></a></h2>
</div>
<div class="section level2">
<h2 id="method-1-battle-creek-clear-creek-feather-river-knights-landing-tisdale">Method 1: Battle Creek, Clear Creek, Feather River, Knights Landing, Tisdale<a class="anchor" aria-label="anchor" href="#method-1-battle-creek-clear-creek-feather-river-knights-landing-tisdale"></a></h2>
<p>The above creeks have data available to calculate the hours fished. There are a few cases when start date is NA. For these we fill in the start date assuming it is the sample date of the previous record. Note that there are some records with 0 hours. These occur because trap visit data was entered when the trap was not in service and then a new trap visit entry was recorded once the trap started working again.</p>
<table style="width:100%;" class="table"><colgroup><col width="15%"><col width="15%"><col width="8%"><col width="13%"><col width="11%"><col width="24%"><col width="10%"></colgroup><thead><tr class="header"><th align="left">start_datetime</th>
<th align="left">stop_datetime</th>
<th align="left">site</th>
<th align="left">subsite</th>
<th align="left">stream</th>
<th align="left">hours_fished_methodology</th>
<th align="left">hours_fished</th>
</tr></thead><tbody><tr class="odd"><td align="left">1997-12-22 10:40:00</td>
<td align="left">1997-12-22 10:40:00</td>
<td align="left">eye riffle</td>
<td align="left">eye riffle_north</td>
<td align="left">feather river</td>
<td align="left">using start time and stop time</td>
<td align="left">0.00 hours</td>
</tr><tr class="even"><td align="left">1997-12-22 10:40:00</td>
<td align="left">1997-12-23 11:40:00</td>
<td align="left">eye riffle</td>
<td align="left">eye riffle_north</td>
<td align="left">feather river</td>
<td align="left">using start time and stop time</td>
<td align="left">25.00 hours</td>
</tr><tr class="odd"><td align="left">1997-12-26 13:56:00</td>
<td align="left">1997-12-26 13:56:00</td>
<td align="left">eye riffle</td>
<td align="left">eye riffle_north</td>
<td align="left">feather river</td>
<td align="left">using start time and stop time</td>
<td align="left">0.00 hours</td>
</tr><tr class="even"><td align="left">1997-12-26 13:56:00</td>
<td align="left">1997-12-27 09:56:00</td>
<td align="left">eye riffle</td>
<td align="left">eye riffle_north</td>
<td align="left">feather river</td>
<td align="left">using start time and stop time</td>
<td align="left">20.00 hours</td>
</tr><tr class="odd"><td align="left">1997-12-27 09:56:00</td>
<td align="left">1997-12-28 09:11:00</td>
<td align="left">eye riffle</td>
<td align="left">eye riffle_north</td>
<td align="left">feather river</td>
<td align="left">using start time and stop time</td>
<td align="left">23.25 hours</td>
</tr></tbody></table><div class="section level3">
<h3 id="qc">QC<a class="anchor" aria-label="anchor" href="#qc"></a></h3>
<p>The dot plot below shows hours fished for each stream by date. Most dots appear to be hovering around the 24 hour mark but a few are greater than 1000 or less than -1000 and skew the plot.</p>
<div class="float">
<img src="figure/unnamed-chunk-2-1.png" alt="plot of chunk unnamed-chunk-2"><div class="figcaption">plot of chunk unnamed-chunk-2</div>
</div>
<p>The histogram below shows data filtered to remove the outliers though there are still some inconsistencies with hours fished below or equal to 0. As mentioned above there are reasons why hours fished may be 0.</p>
<div class="float">
<img src="figure/unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3"><div class="figcaption">plot of chunk unnamed-chunk-3</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="method-3-butte-creek--yuba-river">Method 3: Butte Creek &amp; Yuba River<a class="anchor" aria-label="anchor" href="#method-3-butte-creek--yuba-river"></a></h2>
<p>Hours fished are calculated by taking the difference between the date/time at each observation.</p>
<table style="width:100%;" class="table"><colgroup><col width="18%"><col width="18%"><col width="9%"><col width="9%"><col width="10%"><col width="22%"><col width="11%"></colgroup><thead><tr class="header"><th align="left">start_datetime</th>
<th align="left">end_datetime</th>
<th align="left">site</th>
<th align="left">subsite</th>
<th align="left">stream</th>
<th align="left">hours_fished_methodology</th>
<th align="right">hours_fished</th>
</tr></thead><tbody><tr class="odd"><td align="left">1997-01-18 09:00:00</td>
<td align="left">1997-01-19 09:00:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using only start time</td>
<td align="right">24.00</td>
</tr><tr class="even"><td align="left">1997-03-05 09:00:00</td>
<td align="left">1997-03-06 09:00:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using only start time</td>
<td align="right">24.00</td>
</tr><tr class="odd"><td align="left">1997-03-11 07:00:00</td>
<td align="left">1997-03-12 09:15:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using only start time</td>
<td align="right">26.25</td>
</tr><tr class="even"><td align="left">1997-03-12 09:15:00</td>
<td align="left">1997-03-15 09:00:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using only start time</td>
<td align="right">71.75</td>
</tr><tr class="odd"><td align="left">1997-03-15 09:00:00</td>
<td align="left">1997-03-16 09:30:00</td>
<td align="left">adams dam</td>
<td align="left">adams dam</td>
<td align="left">butte creek</td>
<td align="left">using only start time</td>
<td align="right">24.50</td>
</tr></tbody></table><div class="section level3">
<h3 id="qc-1">QC<a class="anchor" aria-label="anchor" href="#qc-1"></a></h3>
<p>The dot plot below shows hours fished for each stream by date. Here we see several distinct bands of dots in 24 hour increments, indicating that the trap is most often checked every day but that there are some instances where it is checked every other or every few days.</p>
<div class="float">
<img src="figure/unnamed-chunk-4-1.png" alt="plot of chunk unnamed-chunk-4"><div class="figcaption">plot of chunk unnamed-chunk-4</div>
</div>
<p>Anything greater than 5 days of trap operation was considered a mistake and set at 24 hours instead. The histogram below shows data filtered to remove the outliers though we still see some inconsistencies with hours fished below or equal to 0.</p>
<div class="float">
<img src="figure/unnamed-chunk-5-1.png" alt="plot of chunk unnamed-chunk-5"><div class="figcaption">plot of chunk unnamed-chunk-5</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="mill-creek--deer-creek">Mill Creek &amp; Deer Creek<a class="anchor" aria-label="anchor" href="#mill-creek--deer-creek"></a></h2>
<p>Mill &amp; Deer creeks do not have data available (no time variable) to calculate hours fished. Mill &amp; Deer creeks also do not have sample period revolutions so we cannot use trap revolutions fished. We therefore assume 24 hours fished for every day with data.</p>
<table style="width:100%;" class="table"><colgroup><col width="15%"><col width="11%"><col width="11%"><col width="11%"><col width="11%"><col width="25%"><col width="13%"></colgroup><thead><tr class="header"><th align="left">trap_stop_date</th>
<th align="left">stream</th>
<th align="left">site</th>
<th align="left">subsite</th>
<th align="left">site_group</th>
<th align="left">hours_fished_methodology</th>
<th align="right">hours_fished</th>
</tr></thead><tbody><tr class="odd"><td align="left">1992-10-14</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">24 hour assumption</td>
<td align="right">24</td>
</tr><tr class="even"><td align="left">1992-10-17</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">24 hour assumption</td>
<td align="right">24</td>
</tr><tr class="odd"><td align="left">1992-10-30</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">24 hour assumption</td>
<td align="right">24</td>
</tr><tr class="even"><td align="left">1992-11-04</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">24 hour assumption</td>
<td align="right">24</td>
</tr><tr class="odd"><td align="left">1992-11-05</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">deer creek</td>
<td align="left">24 hour assumption</td>
<td align="right">24</td>
</tr></tbody></table></div>
<div id="combine-data" class="section level1">

<p>We combined all methods to create one table with daily hours fished for each trap. We added rows with 0 effort for days that where there is no trapping data.</p>
<div class="section level2">
<h2 id="summarized-by-week">Summarized by week<a class="anchor" aria-label="anchor" href="#summarized-by-week"></a></h2>
<p>We grouped hours fished data by site, subsite, week, and year and summarized to come up with a weekly hours fished dataset. We capped hours fished to 168 for each stream, assuming that a single trap could not run for more hours than there are in a week. Before 2005 trap data is not available for Knights Landing, we assume 168 hours when trap data is missing.</p>
<pre><code><span><span class="co">## # A tibble: 288 × 5</span></span>
<span><span class="co">## # Groups:   year, stream, site [69]</span></span>
<span><span class="co">##     year stream           site                    subsite     n</span></span>
<span><span class="co">##    &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;                   &lt;chr&gt;   &lt;int&gt;</span></span>
<span><span class="co">##  1  1994 sacramento river red bluff diversion dam gate 1      5</span></span>
<span><span class="co">##  2  1994 sacramento river red bluff diversion dam gate 10     4</span></span>
<span><span class="co">##  3  1994 sacramento river red bluff diversion dam gate 11     6</span></span>
<span><span class="co">##  4  1994 sacramento river red bluff diversion dam gate 3     12</span></span>
<span><span class="co">##  5  1994 sacramento river red bluff diversion dam gate 5     16</span></span>
<span><span class="co">##  6  1994 sacramento river red bluff diversion dam gate 7     11</span></span>
<span><span class="co">##  7  1994 sacramento river red bluff diversion dam gate 9     16</span></span>
<span><span class="co">##  8  1995 sacramento river knights landing         8.3         3</span></span>
<span><span class="co">##  9  1995 sacramento river knights landing         8.4         7</span></span>
<span><span class="co">## 10  1995 sacramento river red bluff diversion dam gate 1     33</span></span>
<span><span class="co">## # ℹ 278 more rows</span></span></code></pre>
<div class="section level3">
<h3 id="qc-2">QC<a class="anchor" aria-label="anchor" href="#qc-2"></a></h3>
<p>The following plots provide visuals to show weekly hours fished for all tributaries. Note that this is for all years of data so there are multiple datapoints for a given week due to multiple years being represented.</p>
<p><img src="figure/unnamed-chunk-8-1.png" alt="plot of chunk unnamed-chunk-8"><img src="figure/unnamed-chunk-8-2.png" alt="plot of chunk unnamed-chunk-8"></p>
</div>
</div>
</div>


  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by Ashley Vizek, Erin Cain, Liz Stebbins.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

