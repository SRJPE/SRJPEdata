```{r}
library(tidyverse)
library(CDECRetrieve)
library(dataRetrieval)
library(SRJPEdata)
```

The purpose of this code is to figure out the minimum dates of all salmon data for each site, and use this as a reference of the starting date to pull environmental data

### Checking for date ranges

```{r}
#catch
ggplot(rst_catch, aes(x = date, y = stream)) +
  geom_line() +
  facet_wrap(~stream) +
  scale_x_date(
    date_breaks = "2 years",      
    date_labels = "%Y"            
  ) +
    theme(axis.text.x = element_text(angle = 90, hjust = 1)) 

#carcass_estimates
ggplot(carcass_estimates, aes(x = year, y = stream)) +
  geom_line() +
  facet_wrap(~stream) +
      scale_x_continuous(
    breaks = seq(floor(min(carcass_estimates$year, na.rm = TRUE)), 
                 ceiling(max(carcass_estimates$year, na.rm = TRUE)), 
                 by = 2),  
    labels = as.character  
  ) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))

#holding
ggplot(holding, aes(x = date, y = stream)) +
  geom_line() +
  facet_wrap(~stream) +
  scale_x_date(
    date_breaks = "2 years",      
    date_labels = "%Y"            
  ) +
    theme(axis.text.x = element_text(angle = 90, hjust = 1))

#redd
ggplot(redd, aes(x = date, y = stream)) +
  geom_line() +
  facet_wrap(~stream) +
  scale_x_date(
    date_breaks = "2 years",      
    date_labels = "%Y"            
  ) +
    theme(axis.text.x = element_text(angle = 90, hjust = 1))

#upstream_passage_estimates
ggplot(upstream_passage_estimates, aes(x = year, y = stream)) +
  geom_line() +
  facet_wrap(~stream) +
      scale_x_continuous(
    breaks = seq(floor(min(carcass_estimates$year, na.rm = TRUE)), 
                 ceiling(max(carcass_estimates$year, na.rm = TRUE)), 
                 by = 2),  
    labels = as.character  
  ) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
```

## Battle Creek ----

 * Earliest year of salmon data available = 1995

*rst_catch*
```{r}
battle_catch <- rst_catch |> 
  filter(stream == "battle creek") |> 
  glimpse()

range(battle_catch$date) #"1998-08-31" "2022-09-30"
```

No battle in *carcass_estimate*

*holding*
```{r}
battle_holding <- holding |>
  filter(stream == "battle creek") |>
  glimpse()

range(battle_holding$date) #"2001-07-19" "2019-10-18"
```

*redd*
```{r}
battle_redd <- redd |> 
  filter(stream == "battle creek") |> 
  glimpse()

range(redd$date) # "1997-10-01" "2023-10-01"
```


*upstream_passage_estimates*
```{r}
battle_upstream_estimates <- upstream_passage_estimates |> 
  filter(stream == "battle creek") |> 
  glimpse()

range(battle_upstream_estimates$year) #1995 2021
```


### Clear Creek ---- 

*rst_catch*
```{r}
clear_catch <- rst_catch |> 
  filter(stream == "clear creek") |> 
  glimpse()

range(clear_catch$date) # "1998-12-06" "2022-06-30"
```

No Clear Creek in *carcass_estimate*

*holding*
```{r}
clear_holding <- holding |> 
  filter(stream == "clear creek") |> 
  glimpse()

range(clear_holding$date) # "2008-06-02" "2019-10-10"
```

*redd*
```{r}
clear_redd <- redd |> 
  filter(stream == "clear creek") |> 
  glimpse()

range(clear_redd$date) # "2000-09-25" "2019-10-24"
```

*upstream_passage_estimates*
```{r}
clear_upstream_estimates <- upstream_passage_estimates |> 
  filter(stream == "clear creek") |> 
  glimpse()

range(clear_upstream_estimates$year) # 1995 2021
```


### Deer Creek ----

  * Earliest year of salmon data available = 1986

*rst_catch*
```{r}
deer_catch <- rst_catch |> 
  filter(stream == "deer creek") |> 
  glimpse()

range(deer_catch$date, na.rm = TRUE)
#"1998-08-31" "2022-09-30"
```

No deer in *carcass_estimate*

*holding*
```{r}
deer_holding <- holding |> 
  filter(stream == "deer creek") |> 
  glimpse()

range(deer_holding$date) #"1986-08-01" "2020-08-01"
```

No *redd* for Deer Creek

*upstream_passage_estimates*
```{r}
deer_upstream_estimates <- upstream_passage_estimates |> 
  filter(stream == "deer creek") |> 
  glimpse()

range(deer_upstream_estimates$year) #2014 2020
```


### Feather River ----

  * Earliest year of salmon data available = 1997

*rst_catch*
```{r}
feather_catch <- rst_catch |> 
  filter(stream == "feather river") |> 
  glimpse()

range(feather_catch$date, na.rm = TRUE) #"1997-12-22" "2022-06-22"
```


*carcass_estimate*
```{r}
feather_carcass <- carcass_estimates |> 
  filter(stream == "feather river") |> 
  glimpse()

range(feather_carcass$year) #2012 2022
```


No *holding* for Feather River

*redd*
```{r}
feather_redd <- redd |>
  filter(stream == "feather river") |> 
  glimpse()

range(feather_redd$date) #"2009-09-29" "2020-11-20"
```

No *upstream_passage_estimates* for Feather River

### Mill Creek ----

  * Earliest year of salmon data available = 1995

*rst_catch*
```{r}
mill_catch <- rst_catch |> 
  filter(stream == "mill creek") |> 
  glimpse()

range(mill_catch$date, na.rm = TRUE) # "1995-12-09" "2010-06-18"
```

No *carcass_estimate* for Mill Creek 

No *holding* for Mill Creek 

*upstream_passage_estimates*
```{r}
mill_upstream_estimates <- upstream_passage_estimates |> 
  filter(stream == "mill creek") |> 
  glimpse()

range(mill_upstream_estimates$year) #2014 2020
```

*redd*
```{r}
mill_redd <- redd |> 
  filter(stream == "mill creek") |> 
  glimpse()

range(mill_redd$date) # "1997-10-01" "2023-10-01"
```

*upstream_passage_estimates*
```{r}
mill_upstream_estimates <- upstream_passage_estimates |> 
  filter(stream == "mill creek") |> 
  glimpse()

range(mill_upstream_estimates$year) # 2014 2020
```


### Sacramento River 

  * Earliest year of salmon data available = 1994

*rst_catch*
```{r}
sac_catch <- rst_catch |> 
  filter(stream == "sacramento river") |> 
  glimpse()

range(sac_catch$date, na.rm = TRUE) # "1994-07-18" "2023-07-31"
```

No *carcass_estimate* for Sacramento River

No *redd* for Sacramento River

No *upstream_passage_estimates* for Sacramento River


### Yuba River 

  * Earliest year of salmon data available = 1999

*rst_catch*
```{r}
yuba_catch <- rst_catch |> 
  filter(stream == "yuba river") |> 
  glimpse()

range(yuba_catch$date, na.rm = TRUE) # "1999-11-25" "2009-08-18"
```


*carcass_estimates*
```{r}
yuba_carcass <- carcass_estimates |> 
  filter(stream == "yuba river") |> 
  glimpse()

range(yuba_carcass$year) # 2014 2020
```

No *holding* for Yuba River 

*redd*
```{r}
yuba_redd <- redd |> 
  filter(stream == "yuba river") |> 
  glimpse()

range(yuba_redd$date) # "2011-09-19" "2021-04-20"
```


*upstream_passage_estimates*
```{r}
yuba_upstream_estimates<- upstream_passage_estimates |> 
  filter(stream == "yuba river") |> 
  glimpse()

range(yuba_upstream_estimates$year) # 2004 2021
```

